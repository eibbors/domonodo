// Generated by CoffeeScript 1.10.0
(function() {
  var DomoClient, DomoDataClient, DomoDataSetMetaData,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  DomoClient = require('./Client');

  DomoDataClient = (function(superClass) {
    extend(DomoDataClient, superClass);

    function DomoDataClient(options) {
      if (options == null) {
        options = {};
      }
      if (options.scope == null) {
        options.scope = 'data';
      }
      DomoDataClient.__super__.constructor.call(this, options);
    }

    DomoDataClient.prototype.createDataSet = function(dataset, callback) {
      var req;
      req = {
        method: 'POST',
        uri: "https://api.domo.com/v1/datasets",
        headers: {
          'content-type': 'application/json',
          accept: 'application/json'
        },
        body: JSON.stringify(dataset)
      };
      return this.request(req, (function(_this) {
        return function(error, response, body) {
          if (error) {
            return callback(error, response, body);
          }
          return callback(error, response, body);
        };
      })(this));
    };

    DomoDataClient.prototype.deleteDataSet = function(id, callback) {
      var req;
      req = {
        method: 'DELETE',
        uri: "https://api.domo.com/v1/datasets/" + id
      };
      return this.request(req, (function(_this) {
        return function(error, response, body) {
          if (error) {
            return callback(error, response, body);
          }
          return callback(error, response, body);
        };
      })(this));
    };

    DomoDataClient.prototype.updateDataSet = function(id, dataset, callback) {
      var req;
      req = {
        method: 'PUT',
        uri: "https://api.domo.com/v1/datasets",
        headers: {
          'content-type': 'application/json',
          accept: 'application/json'
        },
        body: JSON.stringify(dataset)
      };
      return this.request(req, (function(_this) {
        return function(error, response, body) {
          if (error) {
            return callback(error, response, body);
          }
          return callback(error, response, body);
        };
      })(this));
    };

    DomoDataClient.prototype.getDataSet = function(id, options, callback) {
      var req;
      if (options == null) {
        options = {};
      }
      req = {
        method: 'GET',
        uri: "https://api.domo.com/v1/datasets/" + id,
        qs: {
          fields: options.fields
        }
      };
      return this.request(req, (function(_this) {
        return function(error, response, body) {
          if (error) {
            return callback(error, response, body);
          }
          return callback(error, response, body);
        };
      })(this));
    };

    DomoDataClient.prototype.listDataSets = function(options, callback) {
      var req;
      if (options == null) {
        options = {};
      }
      req = {
        method: 'GET',
        uri: "https://api.domo.com/v1/datasets",
        qs: {
          sort: options.sort,
          fields: options.fields,
          offset: options.offset,
          limit: options.limit
        }
      };
      return this.request(req, (function(_this) {
        return function(error, response, body) {
          if (error) {
            return callback(error, response, body);
          }
          return callback(error, response, body);
        };
      })(this));
    };

    DomoDataClient.prototype.pullData = function(id, callback) {
      var req;
      req = {
        method: 'GET',
        uri: "https://api.domo.com/v1/datasets/" + id + "/data",
        headers: {
          accept: 'text/csv'
        }
      };
      return this.request(req, (function(_this) {
        return function(error, response, body) {
          if (error) {
            return callback(error, response, body);
          }
          return callback(error, response, body);
        };
      })(this));
    };

    DomoDataClient.prototype.pushData = function(id, options, callback) {
      var req;
      if (options == null) {
        options = {};
      }
      req = {
        method: 'PUT',
        uri: "https://api.domo.com/v1/datasets/" + id + "/data",
        qs: {
          append: options.append
        },
        headers: {
          accept: 'text/csv'
        }
      };
      return this.request(req, (function(_this) {
        return function(error, response, body) {
          if (error) {
            return callback(error, response, body);
          }
          return callback(error, response, body);
        };
      })(this));
    };

    return DomoDataClient;

  })(DomoClient);

  DomoDataSetMetaData = (function() {
    function DomoDataSetMetaData(options) {
      var k, v;
      if (options == null) {
        options = {};
      }
      if (options.name == null) {
        options.name = null;
      }
      if (options.schema == null) {
        options.schema = null;
      }
      for (k in options) {
        v = options[k];
        this[k] = v;
      }
    }

    return DomoDataSetMetaData;

  })();

  module.exports = {
    DataClient: DomoDataClient,
    DataSetMetaData: DomoDataSetMetaData
  };

}).call(this);
